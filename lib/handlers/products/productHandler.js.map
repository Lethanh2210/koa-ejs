{"version":3,"file":"productHandler.js","names":["getProducts","ctx","sort","sortType","limit","query","products","getAllProducts","body","data","e","status","success","error","message","getProduct","id","params","fields","product","getOneProduct","addProduct","postData","request","createProduct","deleteProduct","removeProduct","updateProduct","updateData","update"],"sources":["../../../src/handlers/products/productHandler.js"],"sourcesContent":["import {\r\n    getAll as getAllProducts,\r\n    add as createProduct,\r\n    getOne as getOneProduct,\r\n    remove as removeProduct,\r\n    update\r\n} from \"../../repository/productRepository.js\";\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<void>}\r\n */\r\nexport async function getProducts(ctx) {\r\n    try {\r\n        const {sort: sortType, limit} = ctx.query;\r\n        const products = getAllProducts({limit, sortType});\r\n        ctx.body = {\r\n            data: products\r\n        };\r\n    } catch (e) {\r\n        ctx.status = 404;\r\n        ctx.body = {\r\n            success: false,\r\n            data: [],\r\n            error: e.message\r\n        };\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<{data: Object} | {success: boolean, error: *}|{message: string, status: string}>}\r\n */\r\n\r\nexport async function getProduct(ctx) {\r\n    try {\r\n        const {id} = ctx.params;\r\n        const {fields} = ctx.query;\r\n        const product = getOneProduct({id, fields})\r\n        if(product){\r\n            return ctx.body = {\r\n                data: product\r\n            }\r\n        }\r\n        ctx.status = 404;\r\n        return ctx.body = {\r\n            status: 'error!',\r\n            message: 'Product Not Found with that id!'\r\n        };\r\n\r\n    } catch (e) {\r\n        return ctx.body = {\r\n            success: false,\r\n            error: e.message\r\n        };\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<{success: boolean || String, error: *}|{success: boolean}>}\r\n */\r\nexport async function addProduct(ctx) {\r\n    try {\r\n        const postData = ctx.request.body;\r\n        createProduct(postData);\r\n        ctx.status = 200;\r\n        return ctx.body = {\r\n            success: \"Create product successfully\"\r\n        };\r\n    } catch (e) {\r\n        ctx.status = 404;\r\n        return ctx.body = {\r\n            success: false,\r\n            error: e.message\r\n        };\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<{success: boolean || String, error: *}|{success: boolean}>}\r\n */\r\nexport async function deleteProduct(ctx) {\r\n    try {\r\n        const {id} = ctx.params;\r\n        removeProduct(id);\r\n        ctx.status = 200;\r\n        return ctx.body = {\r\n            success: \"Delete Product successfully\"\r\n        };\r\n    } catch (e) {\r\n        return ctx.body = {\r\n            success: false,\r\n            error: e.message\r\n        };\r\n    }\r\n}\r\n\r\n\r\n/**\r\n *\r\n * @param ctx\r\n * @returns {Promise<{success: boolean || String, error: *}|{success: boolean}>}\r\n */\r\nexport async function updateProduct(ctx) {\r\n    try {\r\n        const {id} = ctx.params;\r\n        const updateData = ctx.request.body;\r\n        update({id, updateData});\r\n\r\n        return ctx.body = {\r\n            success: \"Update Product successfully\"\r\n        };\r\n    } catch (e) {\r\n        return ctx.body = {\r\n            success: false,\r\n            error: e.message\r\n        };\r\n    }\r\n}\r\n\r\n"],"mappings":"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"}